<!-- æ­¥é©Ÿ 1ï¼šåŸºæœ¬ HTML ç¶²é æ¶æ§‹ -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ç‹—ç‹—å“ç¨®åˆ†é¡ AI ç¶²ç«™</title>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    img { max-width: 300px; margin: 10px; }
  </style>
</head>
<body>
  <h1>ğŸ¶ ç‹—ç‹—å“ç¨®åˆ†é¡å™¨ + å”å°‹é€£çµ</h1>

  <!-- æ­¥é©Ÿ 2ï¼šä»‹ç´¹æ®µè½ -->
  <p>ä¸Šå‚³ä½ çš„ç‹—ç‹—ç…§ç‰‡ï¼Œé€™å€‹ AI æ¨¡å‹æœƒåˆ¤æ–·ç‰ æ˜¯å“ªä¸€å€‹å“ç¨®ï¼Œä¸¦æä¾›è¿·å­çŠ¬å”å°‹é€£çµã€‚</p>

  <!-- æ­¥é©Ÿ 3ï¼šåœ–ç‰‡åˆ†é¡æŒ‰éˆ• -->
  <input type="file" accept="image/*" onchange="predictImage(event)"><br>
  <div id="preview"></div>
  <h3>åˆ†é¡çµæœï¼š</h3>
  <div id="result"></div>

  <!-- æ­¥é©Ÿ 4ï¼šè¿·å­çŠ¬ç¶²ç«™é€£çµ -->
  <h3>ğŸ”— å”å°‹ç¶²ç«™ï¼š</h3>
  <a href="https://www.pet-home.jp/lostdog/" target="_blank">ãƒšãƒƒãƒˆã®ãŠã†ã¡ - è¿·å­çŠ¬æ²ç¤ºæ¿</a>

  <!-- æ­¥é©Ÿ 5ï¼šJavaScript æ¨¡å‹åŠ è¼‰èˆ‡åˆ†é¡é‚è¼¯ -->
  <script>
    const URL = "model/"; // æ¨¡å‹è³‡æ–™å¤¾è·¯å¾‘
    let model, metadata;

    async function loadModel() {
      model = await tmImage.load(URL + "model.json", URL + "metadata.json");
    }

    async function predictImage(event) {
      const file = event.target.files[0];
      const image = new Image();
      image.src = URL.createObjectURL(file);
      image.onload = async () => {
        document.getElementById("preview").innerHTML = "";
        document.getElementById("preview").appendChild(image);

        const prediction = await model.predict(image);
        prediction.sort((a, b) => b.probability - a.probability);

        const topResult = prediction[0];
        document.getElementById("result").innerHTML =
          `${topResult.className} (${(topResult.probability * 100).toFixed(2)}%)`;
      };
    }

    loadModel();
  </script>
</body>
</html>
